<div class="card" [ngClass]="cardClasses()" [ngStyle]="{
        'max-width': maxWidth() + 'px',
        'background-color': backgroundColor()
      }">
  <!-- Header -->
  @if (showHeader() || header() || avatar()) {
  <div class="card-header">
    <div class="header-content">
      @if (avatar()) {
      <img [src]="avatar()!" alt="Avatar" class="avatar" [ngClass]="avatarSizeClass()">
      }
      <div class="header-text">
        @if (title()) {
        <h3 class="card-title">{{ title() }}</h3>
        }
        @if (subtitle()) {
        <p class="card-subtitle">{{ subtitle() }}</p>
        }
      </div>
    </div>

    @if (showActions()) {
    <div class="header-actions">
      <button class="icon-button" (click)="onFavorite.emit(!isFavorited())" [class.favorited]="isFavorited()">
        ♥
      </button>
      <button class="icon-button" (click)="onMenu.emit($event)">
        ⋮
      </button>
    </div>
    }
  </div>
  }

  <!-- Image -->
  @if (displayImageUrl()) {
  <div class="card-image">
    <img [src]="displayImageUrl()!" [alt]="imageAlt()" (error)="handleImageError()">
    @if (imageBadge()) {
    <div class="image-badge">{{ imageBadge() }}</div>
    }
  </div>
  }

  <!-- Content -->
  <div class="card-content">
    <ng-content></ng-content>
    @if (content()) {
    <p class="card-text">{{ content() }}</p>
    }
  </div>

  <!-- Actions -->
  @if (showActions() || primaryButtonText() || secondaryButtonText()) {
  <div class="card-actions">
    @if (secondaryButtonText()) {
    <button class="btn-secondary" (click)="onSecondaryAction.emit($event)" [disabled]="disabled()">
      {{ secondaryButtonText() }}
    </button>
    }
    @if (primaryButtonText()) {
    <button class="btn-primary" (click)="onPrimaryAction.emit($event)" [disabled]="disabled()">
      {{ primaryButtonText() }}
    </button>
    }
  </div>
  }

  <!-- Footer -->
  @if (showFooter() || footerText() || timestamp()) {
  <div class="card-footer">
    @if (footerText()) {
    <span class="footer-text">{{ footerText() }}</span>
    }
    @if (timestamp()) {
    <span class="timestamp">{{ timestamp() | date:timestampFormat() }}</span>
    }
  </div>
  }
</div>